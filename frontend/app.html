<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Editor de Pedidos</title>

    <!-- Manifest e cor do tema -->
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" type="image/png" href="/icons/icon-192.png" />
    <link rel="apple-touch-icon" href="/icons/icon-192.png" />
    <meta name="theme-color" content="#0d6efd" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600&family=Poppins:wght@400;500&display=swap" rel="stylesheet" />

    <!-- Estilos customizados -->
    <link rel="stylesheet" href="./css/styles.css" />
  </head>

  <body class="app-page">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
      <div class="container-fluid">
        <span class="navbar-brand">
          <i class="bi bi-cart4 me-2"></i>
          Editor de Pedidos
        </span>
        <button class="btn btn-danger btn-sm" onclick="logout()">
          <i class="bi bi-box-arrow-right"></i>
          Sair
        </button>
      </div>
    </nav>

    <!-- Conteúdo -->
    <div class="container py-5">
      <div class="app-card">
        <!-- Upload -->
        <h5 class="card-title text-primary fw-bold mb-3">
          <i class="bi bi-file-earmark-arrow-up"></i>
          Carregar PDF
        </h5>
        <div class="input-group mb-4">
          <input type="file" id="pdfFile" class="form-control" accept="application/pdf" />
          <button id="btnUpload" class="btn btn-primary" onclick="uploadPDF()">
            <span id="btnUploadText">Carregar</span>
            <span id="btnUploadSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
          </button>
        </div>

        <!-- Loading -->
        <div id="loading" class="text-center mb-4 d-none">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Carregando...</span>
          </div>
          <p class="mt-2 text-muted">Processando PDF...</p>
        </div>

        <!-- Lista -->
        <h5 class="card-title text-success fw-bold mb-3">
          <i class="bi bi-list-check"></i>
          Itens encontrados
        </h5>
        <div id="itens" class="mb-4 table-responsive">
          <!-- JS insere itens aqui -->
        </div>

        <!-- Botão gerar PDF -->
        <div class="d-grid">
          <button id="btnSalvar" class="btn btn-success btn-lg" onclick="gerarPedido()">
            <i class="bi bi-save"></i>
            Salvar PDF Final
          </button>
        </div>
      </div>
    </div>

    <!-- Rodapé -->
    <footer class="text-center text-muted py-3 border-top small">
      <span>© 2025 Editor de Pedidos • Todos os direitos reservados</span>
    </footer>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>

    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker
          .register('/service-worker.js')
          .then(() => console.log('Service Worker registrado'))
          .catch((err) => console.error('Erro no SW:', err));
      }
    </script>
  </body>
</html>
